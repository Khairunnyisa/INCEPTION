<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout-KatRing</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&display=swap"
    rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@100..800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/checkout.css">
  <link rel="shortcut icon" href="images/logo-katring.png" type="image/x-icon" />

</head>

<body>
  <div class="checkout-layout">
    <div class="left-image"></div>

    <div class="right-content">
      <div class="checkout-wrapper" id="checkoutWrapper">
        <h4>Detail Checkout</h4>
        <div class="row g-4">
          <div class="col-md-6">
            <div class="menu-card">
              <div class="menu-left">
                <div class="menu-img-wrapper">
                  <img src="images/menu-4.png" alt="">
                </div>
                <div class="menu-text">
                  <small>Paket Menu</small>
                  <h5>Laut Nusantara</h5>
                  <div class="menu-price">
                    Rp45.000
                    <div class="qty-box">
                      <button class="qty-btn decrement">-</button>
                      <span class="qty-value">1</span>
                      <button class="qty-btn increment">+</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="menu-total">45.000</div>
            </div>

            <div class="menu-card">
              <div class="menu-left">
                <div class="menu-img-wrapper">
                  <img src="images/menu-7.png" alt="">
                </div>
                <div class="menu-text">
                  <small>Paket Menu</small>
                  <h5>Komplit Favorit</h5>
                  <div class="menu-price">
                    Rp38.000
                    <div class="qty-box">
                      <button class="qty-btn decrement">-</button>
                      <span class="qty-value">1</span>
                      <button class="qty-btn increment">+</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="menu-total">38.000</div>
            </div>

            <h5 class="fw-bold mt-4 mb-3 text-white">Pembelian & Pengiriman</h5>
            <div class="row">
              <div class="col-7">
                <label>Nama Lengkap</label>
                <input type="text" class="form-control mb-3" placeholder="Nama">
              </div>
              <div class="col-5">
                <label>No. Telp</label>
                <input type="text" class="form-control mb-3" placeholder="No. Telp">
              </div>
            </div>
            <label>Alamat Lengkap</label>
            <input type="text" class="form-control mb-3" placeholder="Alamat">
            <div class="row">
              <div class="col-6">
                <label>Tanggal Pengiriman</label>
                <input type="date" class="form-control mb-3">
              </div>
              <div class="col-6">
                <label>Waktu Pengiriman</label>
                <input type="time" class="form-control mb-3">
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <h5 class="fw-semibold text-white mb-3">Tambahkan Catatan</h5>
            <textarea class="form-control" rows="4" placeholder="Bikin catatan di pesanan kamu..."></textarea>
            <div class="total-box mt-3">
              <div class="small fw-normal text-muted">Total Harga :</div>
              <span id="totalPrice">Rp83.000</span>
            </div>

            <div class="payment-wrapper mt-4">
              <h6 class="fw-semibold d-block mb-2 text-success">Pilih Metode Pembayaran</h6>
              <div class="payment-methods">
                <div class="payment-option" id="cardOption">Kartu Kredit</div>
                <div class="payment-option active" id="otherOption">Lainnya</div>
              </div>

              <div id="cardForm" style="display: none;" class="mt-3">
                <label class="fw-semibold text-success mb-2">Pilih Bank</label>
                <div class="bank-dropdown mb-3 d-flex align-items-center gap-2">
                  <div id="selectedBankLogo" style="display:none;">
                    <img src="" alt="Bank Logo" style="width:35px; height:auto;">
                  </div>
                  <select class="form-select flex-grow-1" id="bankSelect">
                    <option selected disabled>Pilih Bank</option>
                    <option value="bca" data-logo="images/BCA.svg">BCA</option>
                    <option value="bri" data-logo="images/BRI.svg">BRI</option>
                    <option value="mandiri" data-logo="images/Mandiri.svg">Mandiri</option>
                    <option value="bni" data-logo="images/BNI.svg">BNI</option>
                  </select>
                </div>

                <input type="text" class="form-control mb-2" placeholder="Nomor Kartu">
                <div class="row">
                  <div class="col-6"><input type="text" class="form-control mb-2" placeholder="MM/YY"></div>
                  <div class="col-6"><input type="text" class="form-control mb-2" placeholder="CVV"></div>
                </div>
              </div>

              <div class="wallets mt-3" id="walletList">
                <div class="wallet-option"><img src="images/OVO.svg"> OVO</div>
                <div class="wallet-option"><img src="images/GOPAY.svg"> GoPay</div>
                <div class="wallet-option"><img src="images/DANA.svg"> DANA</div>
              </div>

              <button class="confirm-btn mt-4" id="confirmPaymentBtn">Konfirmasi Pembayaran</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Video container -->
      <div id="videoContainer">
        <video id="checkoutVideo">
          <source src="video/checkout-modal-1.mov" type="video/mp4">
          Browsermu tidak mendukung video.
        </video>
        <button id="videoButton">Lanjutkan</button>
      </div>

    </div>
  </div>

  <script>
    // Original interactive features
    const qtyBoxes = document.querySelectorAll('.qty-box');
    const totalPriceEl = document.getElementById('totalPrice');

    function updateTotal() {
      const menuCards = document.querySelectorAll('.menu-card');
      let total = 0;
      menuCards.forEach(card => {
        const priceText = card.querySelector('.menu-price').childNodes[0].nodeValue.trim().replace('Rp', '').replace(/\./g, '');
        const price = parseInt(priceText);
        const qty = parseInt(card.querySelector('.qty-value').textContent);
        total += price * qty;
      });
      totalPriceEl.textContent = 'Rp' + total.toLocaleString();
    }

    qtyBoxes.forEach(box => {
      const incrementBtn = box.querySelector('.increment');
      const decrementBtn = box.querySelector('.decrement');
      const qtyValue = box.querySelector('.qty-value');

      incrementBtn.addEventListener('click', () => {
        qtyValue.textContent = parseInt(qtyValue.textContent) + 1;
        updateTotal();
      });

      decrementBtn.addEventListener('click', () => {
        let current = parseInt(qtyValue.textContent);
        if (current > 0) qtyValue.textContent = current - 1;
        updateTotal();
      });
    });

    const cardOption = document.getElementById('cardOption');
    const otherOption = document.getElementById('otherOption');
    const cardForm = document.getElementById('cardForm');
    const walletList = document.getElementById('walletList');

    cardOption.addEventListener('click', () => {
      cardOption.classList.add('active');
      otherOption.classList.remove('active');
      cardForm.style.display = 'block';
      walletList.style.display = 'none';
    });

    otherOption.addEventListener('click', () => {
      otherOption.classList.add('active');
      cardOption.classList.remove('active');
      cardForm.style.display = 'none';
      walletList.style.display = 'flex';
    });


    // Bank logo selection
    const bankSelect = document.getElementById('bankSelect');
    const selectedBankLogo = document.getElementById('selectedBankLogo');
    bankSelect.addEventListener('change', () => {
      const logo = bankSelect.selectedOptions[0].dataset.logo;
      if (logo) {
        selectedBankLogo.style.display = 'block';
        selectedBankLogo.querySelector('img').src = logo;
      } else {
        selectedBankLogo.style.display = 'none';
      }
    });

    // Video modal
    const confirmBtn = document.getElementById('confirmPaymentBtn');
    const checkoutWrapper = document.getElementById('checkoutWrapper');
    const videoContainer = document.getElementById('videoContainer');
    const video = document.getElementById('checkoutVideo');
    const videoButton = document.getElementById('videoButton');

    confirmBtn.addEventListener('click', () => {
      checkoutWrapper.classList.add('fade-out');
      setTimeout(() => {
        checkoutWrapper.style.display = 'none';
        videoContainer.style.display = 'block';
        videoContainer.style.opacity = 0;
        setTimeout(() => {
          videoContainer.style.transition = 'opacity 0.5s';
          videoContainer.style.opacity = 1;
        }, 50);

        video.play();

        setTimeout(() => {
          videoButton.style.display = 'block';
        }, 4000);
      }, 500);
    });
    videoButton.addEventListener('click', () => {
      video.pause();
      video.src = "video/checkout-modal-2.mov";
      video.load();
      video.play();

      videoButton.style.display = "none";

      setTimeout(() => {
        const formContainer = document.createElement('div');
        formContainer.id = "formContainer";
        formContainer.innerHTML = `
      <textarea id="bigTextbox" placeholder="Tulis pesanmu di sini..."></textarea>
      <button id="sendButton">Kirim</button>
    `;
        document.getElementById('videoContainer').appendChild(formContainer);

        Object.assign(formContainer.style, {
          position: "absolute",
          top: "50%",
          left: "50%",
          transform: "translate(-50%, -50%)",
          display: "flex",
          flexDirection: "column",
          alignItems: "center",
          width: "80%",
          maxWidth: "500px",
          transition: "opacity 0.8s ease",
          opacity: "1"
        });

        const textbox = document.getElementById('bigTextbox'); Object.assign(textbox.style, { width: "100%", height: "200px", borderRadius: "8px", fontSize: "18px", padding: "12px", resize: "none", outline: "none", border: "2px solid #ccc", marginTop: "300px" });

        const sendButton = document.getElementById('sendButton'); Object.assign(sendButton.style, { position: "absolute", width: "200px", bottom: "3px", transform: "translateY(110%)", padding: "0.75rem 1.5rem", backgroundColor: "#93DC17", color: "#242424", border: "none", borderRadius: "4px", cursor: "pointer", fontSize: "1.1rem", marginTop: "290px" });
        sendButton.addEventListener('click', () => {
          const message = textbox.value.trim();
          if (!message) {
            alert("Kamu belum menulis pesan!");
            return;
          }

          formContainer.style.opacity = "0";
          setTimeout(() => {
            formContainer.remove();
            video.pause();
            video.src = "video/checkout-modal-3.mov";
            video.load();
            video.play();
            video.addEventListener("ended", () => {
              window.location.href = "index.html";
            });
          }, 800);
        });
      }, 3000);
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>